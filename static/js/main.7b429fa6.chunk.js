(this.webpackJsonpspritmonopolet=this.webpackJsonpspritmonopolet||[]).push([[0],{34:function(e,t,a){},35:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a.n(r),s=a(26),n=a.n(s),l=(a(34),a(35),a(13)),o=a(2),i=a(0),j=function(e){var t=e.big,a=void 0===t||t,c=Object(r.useState)(""),s=Object(l.a)(c,2),n=s[0],j=s[1],b=Object(o.e)();return Object(i.jsx)("div",{className:a?"SearchWrap-big":"SearchWrap",children:Object(i.jsx)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),n.trim()&&(b.push({pathname:"/search",search:"?query="+n.trim()}),j(""))},children:Object(i.jsx)("input",{className:"SearchInput",value:n,onChange:function(e){j(e.target.value)},type:"text",placeholder:"S\xf6k h\xe4r efter alkodryck"})})})};var b=function(){return Object(i.jsxs)("div",{className:"home-wrapper wrapper",children:[Object(i.jsx)("div",{className:"welcome-text",children:Object(i.jsx)("p",{className:"welcome-text",children:"V\xe4lkommen"})}),Object(i.jsx)("div",{children:Object(i.jsx)(j,{})}),Object(i.jsx)("div",{className:"welcome-info",children:Object(i.jsx)("p",{className:"welcome-info",children:"S\xf6k efter en alkodryck i Systembolagets sortiment f\xf6r att se hur stor andel av priset som \xe4r skatt"})})]})},d=a(28),u=a.n(d),m=a(17),h=a.n(m),p=a.p+"static/media/logo.6ce24c58.svg",g=a(29),x=a.n(g),O=function(e){var t=e.percent,a=new x.a;a.setSpectrum("green","yellow","red");var r=Math.round(100*t);return Object(i.jsxs)("svg",{viewBox:"0 0 36 36",className:"alko-chart",children:[Object(i.jsx)("path",{className:"alko-circle-bg",d:"M18 2.0845\r a 15.9155 15.9155 0 0 1 0 31.831\r a 15.9155 15.9155 0 0 1 0 -31.831"}),Object(i.jsx)("path",{className:"alko-circle",strokeDasharray:r+", 100",style:{stroke:a.colorAt(r)},d:"M18 2.0845\r a 15.9155 15.9155 0 0 1 0 31.831\r a 15.9155 15.9155 0 0 1 0 -31.831"}),Object(i.jsxs)("text",{x:"18",y:"20.35",className:"alko-percentage",children:[r,"%"]})]},r)},v=function(e){var t=e.product,a=t.systembolagetPercentageCut+t.systembolagetUnitCut;return Object(i.jsxs)("div",{className:"productCard",children:[Object(i.jsx)("div",{className:"productImage",children:Object(i.jsx)("img",{src:t.imgSrc,alt:"NO IMAGE"})}),Object(i.jsxs)("div",{className:"nameData",children:[Object(i.jsx)("p",{children:Object(i.jsx)("b",{children:t.name})}),t.subName?Object(i.jsx)("p",{children:t.subName}):null,t.brand?Object(i.jsx)("p",{children:t.brand}):null,Object(i.jsxs)("div",{className:"infoData",children:[Object(i.jsx)("p",{children:t.category}),Object(i.jsxs)("p",{children:["Volume ",t.volumeMl/10,"cl"]}),Object(i.jsxs)("p",{children:[t.alcoholPercent,"%"]}),Object(i.jsxs)("p",{children:["Art.nr ",t.id]})]})]}),Object(i.jsxs)("div",{className:"priceData",children:[Object(i.jsx)("p",{children:Object(i.jsx)("b",{children:"Ink\xf6p"})}),Object(i.jsx)("p",{children:Object(i.jsx)("b",{children:t.originalPrice.toFixed(2)})}),Object(i.jsx)("p",{children:"Alkoholskatt"}),Object(i.jsx)("p",{children:t.alcoholTax.toFixed(2)}),Object(i.jsx)("p",{children:"Systembolagets p\xe5slag"}),Object(i.jsx)("p",{children:a.toFixed(2)}),Object(i.jsx)("p",{children:"Moms"}),Object(i.jsx)("p",{children:t.vat}),Object(i.jsx)("p",{children:Object(i.jsx)("b",{children:"Du betalar"})}),Object(i.jsx)("p",{children:Object(i.jsx)("b",{children:t.totalPrice})})]}),Object(i.jsx)("div",{className:"alkoChart",children:Object(i.jsx)(O,{percent:1-t.originalPrice/t.totalPrice})})]})},y=a(8);function f(e){return Math.round(100*e)/100}var k="Mellanklassprodukt";function N(e,t){var a=t.find((function(t){return t.alcFrom<e.alcoholPercent&&t.alcTo>=e.alcoholPercent}));return a||t[t.length-1]}function S(e,t){return f(t.taxPerLiter*(e.volumeMl/1e3))}function T(e,t){var a=t.systembolaget.categories;if(e.meta.skatteverketType===a.beer){var r=N(e,t.skatteverket.beer);e.alcoholTax=function(e,t){return f(e.alcoholPercent*t.taxPerPercentageAndLiter*(e.volumeMl/1e3))}(e,r)}else if(e.meta.skatteverketType===a.wine){var c=N(e,t.skatteverket.wine);e.alcoholTax=S(e,c)}else if(e.meta.skatteverketType===k){var s=N(e,t.skatteverket.mellanklass);e.alcoholTax=S(e,s)}else if(e.meta.skatteverketType===a.spirit){var n=N(e,t.skatteverket.spirit);e.alcoholTax=function(e,t){return f(e.alcoholPercent/100*e.volumeMl/1e3*t.taxPerLiter)}(e,n)}else e.alcoholTax=0,console.log("Could not calculate taxes",e.name)}function C(e,t){e.meta=e.meta||{},e.vat=f(.2*e.totalPrice),function(e,t){var a=t.systembolaget.categories;e.meta.isNonAlcoholic=e.categories.some((function(e){return e===a.nonAlcoholic})),e.meta.isSmallPackage=e.volumeMl<=350,e.categories.find((function(e){return e===a.beer}))?e.meta.systembolagetType=a.beer:e.categories.find((function(e){return e===a.wine}))?e.meta.systembolagetType=a.wine:e.categories.find((function(e){return e===a.spirit}))?e.meta.systembolagetType=a.spirit:e.categories.find((function(e){return e===a.cider}))&&(e.meta.systembolagetType=a.cider)}(e,t),function(e,t){var a=t.systembolaget.categories,r=t.systembolaget.mellanklassCategories;e.categories.find((function(e){return r.find((function(t){return t===e}))}))?e.meta.skatteverketType=k:e.meta.systembolagetType===a.cider?e.meta.skatteverketType=a.wine:e.meta.skatteverketType=e.meta.systembolagetType}(e,t),T(e,t),function(e,t){var a=t.systembolaget.categories,r=t.systembolaget.unitCuts;e.meta.isNonAlcoholic?e.meta.systembolagetType===a.wine?e.systembolagetUnitCut=r.wineNonAlcoholic:e.meta.systembolagetType===a.cider||e.meta.systembolagetType===a.beer?e.systembolagetUnitCut=r.beerAndCiderNonAlcoholic:(e.systembolagetUnitCut=0,console.log("Could not calculate unit cut",e.name)):e.meta.systembolagetType===a.wine?e.systembolagetUnitCut=e.meta.isSmallPackage?r.wineSmall:r.wine:e.meta.systembolagetType===a.beer?e.systembolagetUnitCut=r.beer:e.meta.systembolagetType===a.cider?e.systembolagetUnitCut=r.cider:e.meta.systembolagetType===a.spirit?e.systembolagetUnitCut=r.spirit:(e.systembolagetUnitCut=0,console.log("Could not calculate unit cut",e.name))}(e,t),function(e,t){var a=t.systembolaget.percentageCut,r=(e.totalPrice-e.vat-e.systembolagetUnitCut-e.alcoholTax)/(1+a);e.systembolagetPercentageCut=f(r*a)}(e,t),e.originalPrice=e.totalPrice-e.vat-e.systembolagetPercentageCut-e.systembolagetUnitCut-e.alcoholTax}function w(e){var t;if((null===e||void 0===e||null===(t=e.images)||void 0===t?void 0:t.length)>0)return e.images[0].imageUrl+"_200.png"}var P={loading:!1,products:[],errorMessage:null,variables:[]},A=function(e,t){switch(t.type){case"SEARCH_REQUEST":return Object(y.a)(Object(y.a)({},e),{},{loading:!0,errorMessage:null});case"SEARCH_SUCCESS":return Object(y.a)(Object(y.a)({},e),{},{loading:!1,products:t.payload.map((function(t,a){return function(e,t,a){var r={id:e.productId,name:e.productNameBold,subName:e.productNameThin,brand:e.producerName,totalPrice:e.price,volumeMl:e.volume,alcoholPercent:e.alcoholPercentage,category:e.categoryLevel1,category2:e.categoryLevel2,category3:e.categoryLevel3,category4:e.categoryLevel4,categories:[e.categoryLevel1,e.categoryLevel2,e.categoryLevel3,e.categoryLevel4],imgSrc:w(e)};return C(r,a),r}(t,0,e.variables)}))});case"SEARCH_FAIL":return Object(y.a)(Object(y.a)({},e),{},{loading:!1,errorMessage:t.error});case"SET_VAR":return Object(y.a)(Object(y.a)({},e),{},{variables:t.payload});default:return e}},M=function(e){var t=Object(o.f)().search,a=Object(r.useReducer)(A,P),c=Object(l.a)(a,2),s=c[0],n=c[1],b=u.a.parse(t);Object(r.useEffect)((function(){h.a.get("https://skatt.herrborgstrom.se/variables").then((function(e){n({type:"SET_VAR",payload:e.data}),console.log(e)})),h.a.get("https://skatt.herrborgstrom.se/products/"+b.query).then((function(e){n({type:"SEARCH_SUCCESS",payload:e.data.products})}))}),[t]);var d=s.products,m=s.errorMessage,g=s.loading&&!m?Object(i.jsx)("img",{classname:"spinner",src:p,alt:""}):m?Object(i.jsx)("div",{className:"errorMessage",children:m}):d.slice(0,30).map((function(e,t){return Object(i.jsx)(v,{product:e},t)}));return Object(i.jsxs)("div",{className:"searchResults-wrapper wrapper",children:[Object(i.jsx)(j,{big:!1}),Object(i.jsx)("div",{className:"SearchResults",children:g})]})},U=function(){return Object(i.jsxs)("div",{className:"wrapper",children:[Object(i.jsx)(j,{big:!1}),Object(i.jsxs)("div",{className:"about-wrapper",children:[Object(i.jsx)("p",{children:Object(i.jsx)("b",{children:"Varf\xf6r?"})}),Object(i.jsx)("li",{children:Object(i.jsx)("p",{children:"Sidan \xe4r skapad i syfte att l\xe4ra mig React d\xe5 jag sedan tidigare endast programmerat i Vue och vanilla Javascript"})}),Object(i.jsx)("p",{children:Object(i.jsx)("b",{children:"Hur?"})}),Object(i.jsx)("li",{children:Object(i.jsxs)("p",{children:["Id\xe9 tagen fr\xe5n min goda v\xe4n ",Object(i.jsx)("a",{href:"https://.herrborgstrom.se",children:"Joakim Borgstr\xf6m"})]})})," ",Object(i.jsx)("li",{children:Object(i.jsxs)("p",{children:["F\xf6r att l\xe4ra dig hur den fungerar h\xe4nvisar jag till Borgstr\xf6ms ursprungliga version skriven i Vue p\xe5 ",Object(i.jsx)("a",{href:"https://skatt.herrborgstrom.se/about",children:"Alkoholskatt"})]})}),Object(i.jsx)("li",{children:Object(i.jsx)("p",{children:"Jag har skrivit all kod sj\xe4lv bortsett fr\xe5n utr\xe4kningarna av alkoholskatt"})})]})]})},E=function(){return Object(i.jsxs)("div",{className:"footer",children:[Object(i.jsx)("p",{children:Object(i.jsx)("a",{href:"/",children:"Home"})}),Object(i.jsx)("p",{children:Object(i.jsx)("a",{href:"/about",children:"About"})}),Object(i.jsx)("p",{children:"Skapad av Johan Berglund"})]})},L=a(12);var R=function(){return Object(i.jsxs)(L.a,{children:[Object(i.jsx)(o.a,{path:"/",exact:!0,component:b}),Object(i.jsx)(o.a,{path:"/search",component:M}),Object(i.jsx)(o.a,{path:"/about",exact:!0,component:U}),Object(i.jsx)(E,{})]})};n.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(R,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.7b429fa6.chunk.js.map